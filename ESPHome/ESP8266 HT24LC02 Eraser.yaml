### Example code for ESP8266 D1 mini
#
esphome:
  name: eeprom_eraser
  platform: ESP8266
  board: d1_mini

i2c:
  sda: GPIO4 # SDA/D2 Software Serial
  scl: GPIO5 # SCL/D1 Sofware Serial
  scan: true
  id: i2c_bus

logger:

button:
  #### Button for Reading the Drum-Counter I²C EEPROM HT24LC02 Addresse 0x50
  - platform: template
    name: "DR321 Read HT24LC02"
    id: read_dr_eeprom
    on_press:
      then:
        - lambda: |-
            const uint8_t EEPROM_ADDR = 0x50;
            uint8_t addr_buf[1];
            uint8_t data_buf[1];

            ESP_LOGI("eeprom", "DR321 Starting EEPROM dump...");

            // Pretty hex dump formatting
            char line[64];

            for (int base = 0; base < 256; base += 16) {
              sprintf(line, "%02X: ", base);

              for (int offset = 0; offset < 16; offset++) {
                int addr = base + offset;

                addr_buf[0] = addr;

                // Set memory pointer
                auto err1 = id(i2c_bus).write(EEPROM_ADDR, addr_buf, 1);
                if (err1 != esphome::i2c::ERROR_OK) {
                  ESP_LOGE("eeprom", "Write pointer failed at 0x%02X (err=%d)", addr, err1);
                  data_buf[0] = 0x00;  // unreadable
                } else {
                  // Read 1 byte
                  auto err2 = id(i2c_bus).read(EEPROM_ADDR, data_buf, 1);
                  if (err2 != esphome::i2c::ERROR_OK) {
                    ESP_LOGE("eeprom", "Read failed at 0x%02X (err=%d)", addr, err2);
                    data_buf[0] = 0x00;
                  }
                }

                char tmp[4];
                sprintf(tmp, "%02X ", data_buf[0]);
                strcat(line, tmp);
              }

              ESP_LOGI("eeprom", "%s", line);
            }

            ESP_LOGI("eeprom", "DR321 EEPROM dump complete.");


  #### Button for Writing Data to the Drum-Counter I²C EEPROM HT24LC02 Addresse 0x50
  - platform: template
    name: "DR321 Write EEPROM"
    id: write_dr_eeprom
    on_press:
      then:
        - lambda: |-
            const uint8_t EEPROM_ADDR = 0x50;

            uint8_t dr321_data [256] = 
            {
              0x00,0x00,0x30,0x39,0x00,0x00,0x2E,0xE0,0x00,0x00,0x00,0x23,0x44,0x52,0x33,0x32,
              0x31,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
              0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x45,0x32,0x32,0x39,
              0x35,0x37,0x33,0x38,0x35,0x33,0x30,0x32,0x30,0x39,0x30,0x34,0x32,0x39,0x32,0x32,
              0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x41,0x76,0x69,0x73,
              0x69,0x6F,0x6E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
              0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x07,0xAC,0x00,
              0x00,0x02,0x94,0x32,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
              0xFF,0xFF,0xFF,0xFF,0x4A,0x30,0x39,0x2D,0x31,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
              0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
              0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x00,0x00,0x00,0x37,
              0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
              0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF
            };

            ESP_LOGI("eeprom", "Writing DR321 data to EEPROM");

            uint8_t buf[9];  // 1 byte address + 8 bytes data

            for (int addr = 0; addr < 256; addr += 8) {
              buf[0] = addr;

              for (int i = 0; i < 8; i++) {
                buf[1 + i] = dr321_data[addr + i];
              }

              auto err = id(i2c_bus).write(EEPROM_ADDR, buf, sizeof(buf));
              if (err != esphome::i2c::ERROR_OK) {
                ESP_LOGE("eeprom", "Write failed at 0x%02X (err=%d)", addr, err);
              } else {
                ESP_LOGI("eeprom", "Wrote page at 0x%02X", addr);
              }

              delay(6);  // write cycle time
            }

            ESP_LOGI("eeprom", "DR321 EEPROM programming complete.");

  #### Button for Reading the Toner-Counter I²C EEPROM HT24LC02 Addresse 0x52
  - platform: template
    name: "TN321 Read HT24LC02"
    id: read_tn_eeprom
    on_press:
      then:
        - lambda: |-
            const uint8_t EEPROM_ADDR = 0x52;
            uint8_t addr_buf[1];
            uint8_t data_buf[1];

            ESP_LOGI("eeprom", "TN321 Starting EEPROM dump...");

            // Pretty hex dump formatting
            char line[64];

            for (int base = 0; base < 256; base += 16) {
              sprintf(line, "%02X: ", base);

              for (int offset = 0; offset < 16; offset++) {
                int addr = base + offset;

                addr_buf[0] = addr;

                // Set memory pointer
                auto err1 = id(i2c_bus).write(EEPROM_ADDR, addr_buf, 1);
                if (err1 != esphome::i2c::ERROR_OK) {
                  ESP_LOGE("eeprom", "Write pointer failed at 0x%02X (err=%d)", addr, err1);
                  data_buf[0] = 0x00;  // unreadable
                } else {
                  // Read 1 byte
                  auto err2 = id(i2c_bus).read(EEPROM_ADDR, data_buf, 1);
                  if (err2 != esphome::i2c::ERROR_OK) {
                    ESP_LOGE("eeprom", "Read failed at 0x%02X (err=%d)", addr, err2);
                    data_buf[0] = 0x00;
                  }
                }

                char tmp[4];
                sprintf(tmp, "%02X ", data_buf[0]);
                strcat(line, tmp);
              }

              ESP_LOGI("eeprom", "%s", line);
            }

            ESP_LOGI("eeprom", "TN321 EEPROM dump complete.");

  #### Button for Writing data to the Toner-Counter I²C EEPROM HT24LC02 Addresse 0x52
  - platform: template
    name: "TN321 Write EEPROM"
    id: write_tn_eeprom
    on_press:
      then:
        - lambda: |-
            const uint8_t EEPROM_ADDR = 0x52;

            uint8_t tn321_data [256] = 
            {
              0x00,0x00,0x30,0x39,0x00,0x78,0xB2,0x70,0x00,0x25,0x17,0x23,0x00,0x00,0x13,0x88,
              0x00,0x00,0x05,0xD8,0x54,0x4E,0x33,0x32,0x31,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
              0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
              0x00,0x00,0x00,0x00,0x54,0x38,0x31,0x33,0x30,0x37,0x31,0x32,0x31,0x32,0x31,0x30,
              0x31,0x30,0x30,0x30,0x31,0x32,0x31,0x36,0x37,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
              0x00,0x00,0x00,0x00,0x41,0x56,0x49,0x53,0x49,0x4F,0x4E,0x00,0x00,0x00,0x00,0x00,
              0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
              0x00,0x00,0x00,0x00,0x41,0x54,0x2D,0x33,0x32,0x58,0x53,0x52,0x38,0x2D,0x37,0x00,
              0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
              0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
              0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF
            };

            ESP_LOGI("eeprom", "Writing TN321 data to EEPROM");

            uint8_t buf[9];  // 1 byte address + 8 bytes data

            for (int addr = 0; addr < 256; addr += 8) {
              buf[0] = addr;

              for (int i = 0; i < 8; i++) {
                buf[1 + i] = tn321_data[addr + i];
              }

              auto err = id(i2c_bus).write(EEPROM_ADDR, buf, sizeof(buf));
              if (err != esphome::i2c::ERROR_OK) {
                ESP_LOGE("eeprom", "Write failed at 0x%02X (err=%d)", addr, err);
              } else {
                ESP_LOGI("eeprom", "Wrote page at 0x%02X", addr);
              }

              delay(6);  // write cycle time
            }

            ESP_LOGI("eeprom", "TN321 EEPROM programming complete.");




